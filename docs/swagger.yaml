basePath: /api/v1
definitions:
  dto.AddLeaderRequest:
    properties:
      is_primary:
        type: boolean
      user_id:
        type: integer
    required:
    - user_id
    type: object
  dto.AssignExecutorRequest:
    properties:
      executor_id:
        type: integer
    required:
    - executor_id
    type: object
  dto.AssignRoleRequest:
    properties:
      role_ids:
        items:
          type: integer
        minItems: 1
        type: array
    required:
    - role_ids
    type: object
  dto.DepartmentRequest:
    properties:
      description:
        type: string
      name:
        maxLength: 100
        type: string
      parent_id:
        type: integer
      status:
        description: 1=正常, 2=禁用
        enum:
        - 1
        - 2
        type: integer
    required:
    - name
    type: object
  dto.FinalizeReviewRequest:
    properties:
      approved:
        type: boolean
      comment:
        type: string
    type: object
  dto.GoalItem:
    properties:
      description:
        type: string
      priority:
        type: integer
      success_criteria:
        type: string
      title:
        type: string
    required:
    - description
    - title
    type: object
  dto.InitiateReviewRequest:
    properties:
      jury_member_ids:
        items:
          type: integer
        type: array
      required_approvals:
        type: integer
      review_mode:
        enum:
        - single
        - jury
        type: string
      review_type:
        enum:
        - goal_review
        - solution_review
        - plan_review
        type: string
      target_id:
        type: integer
      target_type:
        type: string
    required:
    - review_mode
    - review_type
    - target_id
    - target_type
    type: object
  dto.InviteJuryRequest:
    properties:
      jury_member_ids:
        items:
          type: integer
        minItems: 1
        type: array
      required_approvals:
        minimum: 1
        type: integer
    required:
    - jury_member_ids
    - required_approvals
    type: object
  dto.LoginRequest:
    properties:
      password:
        example: password123
        type: string
      username:
        example: johndoe
        type: string
    required:
    - password
    - username
    type: object
  dto.PaginationResponse:
    properties:
      data: {}
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.RegisterRequest:
    properties:
      email:
        example: user@example.com
        type: string
      mobile:
        example: "13800138000"
        type: string
      nickname:
        example: John
        type: string
      password:
        example: password123
        maxLength: 20
        minLength: 6
        type: string
      username:
        example: johndoe
        type: string
    required:
    - email
    - password
    - username
    type: object
  dto.RejectTaskRequest:
    properties:
      reason:
        type: string
    required:
    - reason
    type: object
  dto.SimpleUserResponse:
    properties:
      email:
        type: string
      id:
        type: integer
      username:
        type: string
    type: object
  dto.SolutionItem:
    properties:
      content:
        type: string
      file_name:
        type: string
      mindmap_url:
        type: string
    required:
    - content
    type: object
  dto.SubmitExecutionPlanRequest:
    properties:
      implementation_steps:
        additionalProperties: true
        type: object
      resource_requirements:
        type: string
      risk_assessment:
        type: string
      tech_stack:
        type: string
    required:
    - implementation_steps
    - tech_stack
    type: object
  dto.SubmitExecutionPlanWithGoalsRequest:
    properties:
      goals:
        description: 目标列表（至少一个）
        items:
          $ref: '#/definitions/dto.GoalItem'
        minItems: 1
        type: array
      implementation_steps:
        additionalProperties: true
        description: 实施步骤
        type: object
      resource_requirements:
        description: 资源需求
        type: string
      risk_assessment:
        description: 风险评估
        type: string
      tech_stack:
        description: 技术栈
        type: string
    required:
    - goals
    - implementation_steps
    - tech_stack
    type: object
  dto.SubmitGoalsAndSolutionRequest:
    properties:
      goals:
        items:
          $ref: '#/definitions/dto.GoalItem'
        minItems: 1
        type: array
      solution:
        $ref: '#/definitions/dto.SolutionItem'
    required:
    - goals
    - solution
    type: object
  dto.SubmitReviewOpinionRequest:
    properties:
      comment:
        type: string
      opinion:
        enum:
        - approve
        - reject
        - abstain
        type: string
      score:
        type: integer
    required:
    - opinion
    type: object
  dto.SubmitSolutionRequest:
    properties:
      solution:
        $ref: '#/definitions/dto.SolutionItem'
    required:
    - solution
    type: object
  dto.TaskDetailResponse:
    properties:
      actual_end_date:
        type: string
      actual_start_date:
        type: string
      assignee:
        type: integer
      attachments:
        items:
          type: string
        type: array
      child_sequence:
        type: integer
      creator:
        $ref: '#/definitions/dto.SimpleUserResponse'
      creator_id:
        type: integer
      department_id:
        type: integer
      description:
        type: string
      due_date:
        type: string
      executor:
        $ref: '#/definitions/dto.SimpleUserResponse'
      executor_id:
        type: integer
      expected_end_date:
        type: string
      expected_start_date:
        type: string
      id:
        type: integer
      is_cross_department:
        type: boolean
      is_in_pool:
        type: boolean
      is_template:
        type: boolean
      my_role:
        description: 当前用户在该任务中的角色：creator/executor/jury（用于标识陪审团任务）
        type: string
      parent_task_id:
        type: integer
      priority:
        type: integer
      progress:
        type: integer
      reporter:
        type: integer
      root_task_id:
        type: integer
      split_from_plan_id:
        type: integer
      status:
        type: string
      tags:
        items:
          type: string
        type: array
      task_level:
        type: integer
      task_no:
        type: string
      task_path:
        type: string
      task_status:
        $ref: '#/definitions/dto.TaskStatusResponse'
      task_status_code:
        type: string
      task_type:
        $ref: '#/definitions/dto.TaskTypeResponse'
      task_type_code:
        type: string
      title:
        type: string
      total_subtasks:
        type: integer
    type: object
  dto.TaskRequest:
    properties:
      department_id:
        type: integer
      description:
        type: string
      executor_id:
        type: integer
      expected_end_date:
        type: string
      expected_start_date:
        type: string
      is_in_pool:
        type: boolean
      parent_task_id:
        type: integer
      priority:
        type: integer
      root_task_id:
        type: integer
      solution_deadline:
        description: 思路方案截止时间（可选，仅需求类任务适用，执行人需在此时间前提交方案）
        type: string
      status_code:
        type: string
      task_level:
        type: integer
      task_no:
        type: string
      task_type_code:
        type: string
      title:
        type: string
    required:
    - task_no
    - task_type_code
    - title
    type: object
  dto.TaskStatusResponse:
    properties:
      code:
        type: string
      id:
        type: integer
      name:
        type: string
    type: object
  dto.TaskStatusTransitionRequest:
    properties:
      comment:
        type: string
      to_status_code:
        type: string
    required:
    - to_status_code
    type: object
  dto.TaskTypeResponse:
    properties:
      code:
        type: string
      id:
        type: integer
      name:
        type: string
    type: object
  dto.UpdateTaskRequest:
    properties:
      actual_end_date:
        type: string
      actual_start_date:
        type: string
      assignee:
        type: integer
      attachments:
        items:
          type: string
        type: array
      child_sequence:
        type: integer
      completed_subtasks:
        type: integer
      created_at:
        type: string
      creator_id:
        type: integer
      deleted_at:
        type: string
      department_id:
        type: integer
      description:
        type: string
      due_date:
        type: string
      executor_id:
        type: integer
      expected_end_date:
        type: string
      expected_start_date:
        type: string
      is_cross_department:
        type: boolean
      is_in_pool:
        type: boolean
      is_template:
        type: boolean
      parent_task_id:
        type: integer
      priority:
        type: integer
      progress:
        type: integer
      reporter:
        type: integer
      root_task_id:
        type: integer
      solution_deadline:
        description: 思路方案截止时间（可选，仅需求类任务适用）
        type: string
      split_from_plan_id:
        type: integer
      status:
        type: string
      tags:
        items:
          type: string
        type: array
      task_level:
        type: integer
      task_no:
        type: string
      task_path:
        type: string
      task_status_code:
        type: string
      task_type_code:
        type: string
      title:
        type: string
      total_subtasks:
        type: integer
      updated_at:
        type: string
    type: object
  dto.UpdateUserRequest:
    properties:
      email:
        type: string
      mobile:
        type: string
      nickname:
        type: string
      username:
        type: string
    type: object
host: 192.168.12.48:8888
info:
  contact:
    email: support@example.com
    name: API Support
  description: 企业级任务管理系统的 RESTful API 接口文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: 任务管理系统 API
  version: "1.0"
paths:
  /admin/permissions:
    get:
      consumes:
      - application/json
      description: 获取系统中所有权限
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取权限列表
      tags:
      - 系统管理
  /admin/roles:
    get:
      consumes:
      - application/json
      description: 获取系统中所有角色
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取角色列表
      tags:
      - 系统管理
  /auth/login:
    post:
      consumes:
      - application/json
      description: 用户使用用户名/邮箱/手机号和密码登录，返回JWT令牌
      parameters:
      - description: 登录凭证
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功，返回token
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 用户名或密码错误
          schema:
            additionalProperties: true
            type: object
      summary: 用户登录
      tags:
      - 认证
  /auth/register:
    post:
      consumes:
      - application/json
      description: 新用户注册，注册后需要等待管理员审核
      parameters:
      - description: 注册信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 注册成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
      summary: 用户注册
      tags:
      - 认证
  /departments:
    get:
      consumes:
      - application/json
      description: 获取所有部门
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取部门列表
      tags:
      - 部门管理
    post:
      consumes:
      - application/json
      description: 创建新部门
      parameters:
      - description: 部门信息
        in: body
        name: department
        required: true
        schema:
          $ref: '#/definitions/dto.DepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 创建部门
      tags:
      - 部门管理
  /departments/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定部门
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 删除部门
      tags:
      - 部门管理
    get:
      consumes:
      - application/json
      description: 获取部门详情，包含负责人信息
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取部门详情
      tags:
      - 部门管理
    put:
      consumes:
      - application/json
      description: 更新部门信息
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 部门信息
        in: body
        name: department
        required: true
        schema:
          $ref: '#/definitions/dto.DepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 更新部门
      tags:
      - 部门管理
  /departments/{id}/leaders:
    post:
      consumes:
      - application/json
      description: 为部门添加负责人
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 负责人信息
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/dto.AddLeaderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 添加成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 添加负责人
      tags:
      - 部门管理
  /departments/{id}/leaders/{userId}:
    delete:
      consumes:
      - application/json
      description: 移除部门负责人
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 移除成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 移除负责人
      tags:
      - 部门管理
  /departments/{id}/users:
    post:
      consumes:
      - application/json
      description: 批量分配人员到部门
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户ID列表
        in: body
        name: userIds
        required: true
        schema:
          items:
            type: integer
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 分配人员
      tags:
      - 部门管理
  /review-sessions/{sessionId}:
    get:
      consumes:
      - application/json
      description: 查看审核会话的详细信息和投票情况
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取审核会话详情
      tags:
      - 任务流程
  /review-sessions/{sessionId}/finalize:
    post:
      consumes:
      - application/json
      description: 创建人做出最终审核决策
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 决策
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.FinalizeReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 决策完成
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 最终决策
      tags:
      - 任务流程
  /review-sessions/{sessionId}/invite-jury:
    post:
      consumes:
      - application/json
      description: 创建人将单人审核转为陪审团审核
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 陪审团成员
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.InviteJuryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 邀请成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 邀请陪审团
      tags:
      - 任务流程
  /review-sessions/{sessionId}/jury/{juryMemberId}:
    delete:
      consumes:
      - application/json
      description: 创建人移除指定的陪审团成员
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 陪审团成员ID
        in: path
        name: juryMemberId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 移除成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 移除陪审团成员
      tags:
      - 任务流程
  /review-sessions/{sessionId}/opinion:
    post:
      consumes:
      - application/json
      description: 陪审团成员提交审核意见
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 审核意见
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitReviewOpinionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交审核意见
      tags:
      - 任务流程
  /tasks:
    get:
      consumes:
      - application/json
      description: 获取任务列表，支持分页和多条件过滤
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务编号（模糊搜索）
        in: query
        name: task_no
        type: string
      - description: 任务标题（模糊搜索）
        in: query
        name: title
        type: string
      - description: 任务类型编码
        in: query
        name: task_type_code
        type: string
      - description: 状态编码
        in: query
        name: status_code
        type: string
      - description: 创建人ID
        in: query
        name: creator_id
        type: integer
      - description: 执行人ID
        in: query
        name: executor_id
        type: integer
      - description: 部门ID
        in: query
        name: department_id
        type: integer
      - description: 优先级
        in: query
        name: priority
        type: integer
      - description: 是否在待领池
        in: query
        name: is_in_pool
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            $ref: '#/definitions/dto.PaginationResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务列表
      tags:
      - 任务管理
    post:
      consumes:
      - application/json
      description: 创建一个新的任务
      parameters:
      - description: 任务信息
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/dto.TaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 创建任务
      tags:
      - 任务管理
  /tasks/{id}:
    delete:
      consumes:
      - application/json
      description: 软删除任务（有子任务时无法删除）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的任务ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 删除失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 删除任务
      tags:
      - 任务管理
    get:
      consumes:
      - application/json
      description: 根据任务ID获取任务详细信息，包含关联数据
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            $ref: '#/definitions/dto.TaskDetailResponse'
        "400":
          description: 无效的任务ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 任务不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务详情
      tags:
      - 任务管理
    put:
      consumes:
      - application/json
      description: 更新任务信息，支持部分字段更新
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新的任务信息
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 更新失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 更新任务
      tags:
      - 任务管理
  /tasks/{id}/accept:
    post:
      consumes:
      - application/json
      description: 执行人接受被指派的任务，需求类任务接受后进入待提交方案状态
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 接受成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 接受任务
      tags:
      - 任务流程
  /tasks/{id}/assign:
    post:
      consumes:
      - application/json
      description: 为任务分配执行人，自动更新待领池状态
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 执行人信息
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/dto.AssignExecutorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 分配失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 分配执行人
      tags:
      - 任务管理
  /tasks/{id}/execution-plan:
    post:
      consumes:
      - application/json
      description: 执行人提交需求任务的执行计划和目标（合并提交）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 执行计划和目标
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitExecutionPlanWithGoalsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交执行计划和目标
      tags:
      - 任务流程
  /tasks/{id}/goals:
    post:
      consumes:
      - application/json
      deprecated: true
      description: 此接口已废弃，请使用 POST /tasks/{id}/solution 提交方案
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 目标和方案
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitGoalsAndSolutionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交目标和方案（已废弃）
      tags:
      - 任务流程
  /tasks/{id}/plan:
    post:
      consumes:
      - application/json
      deprecated: true
      description: 此接口已废弃，请使用 POST /tasks/{id}/execution-plan 同时提交执行计划和目标
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 执行计划
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitExecutionPlanRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交执行计划（已废弃）
      tags:
      - 任务流程
  /tasks/{id}/reject:
    post:
      consumes:
      - application/json
      description: 执行人拒绝被指派的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 拒绝原因
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.RejectTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 拒绝成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 拒绝任务
      tags:
      - 任务流程
  /tasks/{id}/review:
    post:
      consumes:
      - application/json
      description: 创建人发起方案或执行计划审核
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 审核配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.InitiateReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 审核发起成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 发起审核
      tags:
      - 任务流程
  /tasks/{id}/solution:
    post:
      consumes:
      - application/json
      description: 执行人提交需求任务的解决方案（不包含目标，目标将在执行计划阶段提交）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 解决方案
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitSolutionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交解决方案
      tags:
      - 任务流程
  /tasks/{id}/transit:
    post:
      consumes:
      - application/json
      description: 执行任务状态转换，验证状态有效性并记录变更日志
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 状态转换信息
        in: body
        name: transition
        required: true
        schema:
          $ref: '#/definitions/dto.TaskStatusTransitionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 状态转换成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 状态转换失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 执行状态转换
      tags:
      - 任务管理
  /tasks/current:
    get:
      consumes:
      - application/json
      description: 根据上下文中的任务ID获取任务基本信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 任务不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取当前任务信息
      tags:
      - 任务管理
  /tasks/my:
    get:
      consumes:
      - application/json
      description: 查询当前登录用户相关的任务，包括自己发布的、自己执行的、被邀请陪审的任务
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务编号（模糊搜索）
        in: query
        name: task_no
        type: string
      - description: 任务标题（模糊搜索）
        in: query
        name: title
        type: string
      - description: 任务类型编码
        in: query
        name: task_type_code
        type: string
      - description: 状态编码
        in: query
        name: status_code
        type: string
      - description: 优先级
        in: query
        name: priority
        type: integer
      - default: all
        description: 筛选角色：all/creator/executor/jury
        in: query
        name: my_role
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功，返回数据中包含 my_role 字段标识用户角色
          schema:
            $ref: '#/definitions/dto.PaginationResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取我的任务列表
      tags:
      - 任务管理
  /users:
    get:
      consumes:
      - application/json
      description: 分页获取用户列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.PaginationResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取用户列表
      tags:
      - 用户管理
    post:
      consumes:
      - application/json
      description: 管理员直接创建用户，状态默认为正常
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 创建失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 管理员创建用户
      tags:
      - 用户管理
  /users/{id}:
    get:
      consumes:
      - application/json
      description: 根据用户ID获取用户详细信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的用户ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 用户不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 根据ID获取用户
      tags:
      - 用户管理
    put:
      consumes:
      - application/json
      description: 更新指定用户的信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 更新失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 更新用户信息
      tags:
      - 用户管理
  /users/{id}/approve:
    post:
      consumes:
      - application/json
      description: 将待审核用户状态改为正常
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 审核成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的用户ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 审核失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 审核用户
      tags:
      - 用户管理
  /users/{id}/roles:
    post:
      consumes:
      - application/json
      description: 为指定用户分配角色
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 角色ID列表
        in: body
        name: roles
        required: true
        schema:
          $ref: '#/definitions/dto.AssignRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 分配失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 分配角色
      tags:
      - 用户管理
  /users/profile:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的详细信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 用户不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取当前用户信息
      tags:
      - 用户管理
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
