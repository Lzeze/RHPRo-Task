basePath: /api/v1
definitions:
  dto.AddLeaderRequest:
    properties:
      user_id:
        description: 用户ID（要添加为负责人的用户）
        type: integer
    required:
    - user_id
    type: object
  dto.AssignExecutorRequest:
    properties:
      executor_id:
        description: 执行人用户ID（要分配为任务执行人的用户）
        type: integer
    required:
    - executor_id
    type: object
  dto.AssignRoleRequest:
    properties:
      role_ids:
        description: 角色ID列表（至少指定一个角色）
        items:
          type: integer
        minItems: 1
        type: array
    required:
    - role_ids
    type: object
  dto.AssignableUserResponse:
    properties:
      department_id:
        description: 所属部门ID
        type: integer
      department_name:
        description: 所属部门名称
        type: string
      email:
        description: 邮箱地址
        type: string
      id:
        description: 用户ID
        type: integer
      is_department_leader:
        description: 是否是负责人
        type: boolean
      nickname:
        description: 用户昵称（用于显示）
        type: string
      username:
        description: 用户真实姓名
        type: string
    type: object
  dto.AttachmentDetailResult:
    properties:
      attachment_type:
        description: 附件类型
        type: string
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 上传时间
      file_name:
        description: 文件名
        type: string
      file_size:
        description: 文件大小（字节）
        type: integer
      file_type:
        description: 文件类型/MIME
        type: string
      file_url:
        description: 文件访问URL
        type: string
      id:
        description: 附件ID
        type: integer
      plan_id:
        description: 关联执行计划ID（0表示无关联）
        type: integer
      solution_id:
        description: 关联方案ID（0表示无关联）
        type: integer
      task_id:
        description: 关联任务ID
        type: integer
      uploaded_by:
        description: 上传人ID
        type: integer
      uploader_nickname:
        description: 上传人昵称
        type: string
      uploader_username:
        description: 上传人用户名
        type: string
    type: object
  dto.AttachmentResult:
    properties:
      file_name:
        description: 文件名
        type: string
      file_size:
        description: 文件大小（字节）
        type: integer
      file_type:
        description: 文件类型/MIME
        type: string
      file_url:
        description: 文件访问URL
        type: string
      id:
        description: 附件ID
        type: integer
    type: object
  dto.BatchImportDepartmentItem:
    properties:
      name:
        description: 部门名称（必填，支持中文，最多100个字符）
        maxLength: 100
        type: string
      parent_name:
        description: 上级部门名称（-1表示顶级部门，其他为上级部门名称）
    required:
    - name
    - parent_name
    type: object
  dto.BatchImportDepartmentResult:
    properties:
      failed_count:
        description: 失败数量
        type: integer
      failed_items:
        description: 失败详情
        items:
          $ref: '#/definitions/dto.BatchImportFailedItem'
        type: array
      success_count:
        description: 成功导入数量
        type: integer
    type: object
  dto.BatchImportFailedItem:
    properties:
      name:
        description: 部门名称
        type: string
      reason:
        description: 失败原因
        type: string
    type: object
  dto.BatchImportUserFailedItem:
    properties:
      mobile:
        description: 手机号
        type: string
      reason:
        description: 失败原因
        type: string
      username:
        description: 用户名
        type: string
    type: object
  dto.BatchImportUserItem:
    properties:
      mobile:
        description: 手机号（必填，作为登录账号，11位中国手机号）
        type: string
      username:
        description: 用户名/真实姓名（必填，支持中文，最多50个字符）
        maxLength: 50
        type: string
    required:
    - mobile
    - username
    type: object
  dto.BatchImportUserResult:
    properties:
      failed_count:
        description: 失败数量
        type: integer
      failed_items:
        description: 失败详情
        items:
          $ref: '#/definitions/dto.BatchImportUserFailedItem'
        type: array
      success_count:
        description: 成功导入数量
        type: integer
    type: object
  dto.ChangeLogResponse:
    properties:
      change_type:
        description: 变更类型（修改、删除等）
        type: string
      change_type_name:
        description: 变更类型显示名称
        type: string
      comment:
        description: 变更备注
        type: string
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 变更发生时间（RFC3339 格式）
      field_name:
        description: 被修改的字段名
        type: string
      field_name_label:
        description: 字段显示名称
        type: string
      id:
        description: 变更日志ID
        type: integer
      new_value:
        description: 修改后的值
        type: string
      new_value_display:
        description: 修改后的值（显示用）
        type: string
      old_value:
        description: 修改前的值
        type: string
      old_value_display:
        description: 修改前的值（显示用）
        type: string
      user_id:
        description: 变更操作人用户ID
        type: integer
      username:
        description: 变更操作人用户名
        type: string
    type: object
  dto.ChangePasswordRequest:
    properties:
      new_password:
        description: 新密码（必填，至少6位）
        minLength: 6
        type: string
      old_password:
        description: 旧密码（必填）
        type: string
    required:
    - new_password
    - old_password
    type: object
  dto.DepartmentDetailResponse:
    properties:
      children:
        description: 子部门列表（递归展示，可选）
        items:
          $ref: '#/definitions/dto.DepartmentResponse'
        type: array
      description:
        description: 部门描述
        type: string
      id:
        description: 部门ID
        type: integer
      leaders:
        description: 部门负责人列表（去掉 IsPrimary 标识）
        items:
          $ref: '#/definitions/dto.DepartmentLeaderDetail'
        type: array
      members:
        description: 部门成员列表
        items:
          $ref: '#/definitions/dto.DepartmentMemberDetail'
        type: array
      name:
        description: 部门名称
        type: string
      parent_id:
        description: 父部门ID
        type: integer
      sort_order:
        description: 排序序号
        type: integer
      status:
        description: 部门状态（1=正常, 2=禁用）
        type: integer
    type: object
  dto.DepartmentLeaderDetail:
    properties:
      email:
        description: 邮箱
        type: string
      job_title:
        description: 职位
        type: string
      nickname:
        description: 用户昵称
        type: string
      user_id:
        description: 用户ID
        type: integer
      username:
        description: 用户名
        type: string
    type: object
  dto.DepartmentMemberDetail:
    properties:
      email:
        description: 邮箱
        type: string
      job_title:
        description: 职位
        type: string
      nickname:
        description: 用户昵称
        type: string
      status:
        description: 用户状态（1=正常，3=禁用，2=待审核）
        type: integer
      user_id:
        description: 用户ID
        type: integer
      username:
        description: 用户名
        type: string
    type: object
  dto.DepartmentRequest:
    properties:
      description:
        description: 部门描述（可选）
        type: string
      name:
        description: 部门名称（最多100个字符）
        maxLength: 100
        type: string
      parent_id:
        description: 父部门ID（用于构建部门树结构，可选）
        type: integer
      status:
        description: 部门状态（1=正常, 2=禁用，可选，默认为1）
        enum:
        - 1
        - 2
        type: integer
    required:
    - name
    type: object
  dto.DepartmentResponse:
    properties:
      id:
        description: 部门ID
        type: integer
      name:
        description: 部门名称
        type: string
      sort_order:
        description: 排序序号
        type: integer
    type: object
  dto.DepartmentTreeResponse:
    properties:
      children:
        description: 子部门列表
        items:
          $ref: '#/definitions/dto.DepartmentTreeResponse'
        type: array
      description:
        description: 部门描述
        type: string
      id:
        description: 部门ID
        type: integer
      name:
        description: 部门名称
        type: string
      parent_id:
        description: 父部门ID
        type: integer
      sort_order:
        description: 排序序号
        type: integer
      status:
        description: 部门状态
        type: integer
    type: object
  dto.ExecutionPlanListItemResponse:
    properties:
      attachments:
        description: 执行计划附件列表（可选）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      id:
        description: 执行计划版本ID
        type: integer
      status:
        description: 执行计划状态（pending=待审核, approved=已批准, rejected=已拒绝）
        type: string
      submitted_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 提交时间（RFC3339 格式）
      submitted_by:
        description: 提交人用户ID
        type: integer
      submitted_by_username:
        description: 提交人用户名
        type: string
      title:
        description: 执行计划标题（用于在列表中显示）
        type: string
      version:
        description: 执行计划版本号（第几版，如 v1, v2）
        type: string
    type: object
  dto.ExecutionPlanVersionResponse:
    properties:
      attachments:
        description: 执行计划附件列表（可选）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 创建时间（RFC3339 格式）
      goals:
        description: 关联的目标列表（此执行计划关联的所有目标）
        items:
          $ref: '#/definitions/dto.GoalItemResponse'
        type: array
      id:
        description: 执行计划版本ID
        type: integer
      implementation_steps:
        additionalProperties: true
        description: 实施步骤（实现计划的详细步骤，JSON格式存储）
        type: object
      resource_requirements:
        description: 资源需求（所需资源、人力、硬件等描述）
        type: string
      risk_assessment:
        description: 风险评估（可能的风险和应对方案）
        type: string
      status:
        description: 执行计划状态（pending=待审核, approved=已批准, rejected=已拒绝）
        type: string
      submitted_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 提交时间（可选，RFC3339 格式）
      submitted_by:
        description: 提交人用户ID
        type: integer
      tech_stack:
        description: 技术栈（使用的技术和工具列表）
        type: string
      version:
        description: 执行计划版本号（第几版）
        type: integer
    type: object
  dto.FinalizeReviewRequest:
    properties:
      approved:
        description: 是否批准（true=批准, false=拒绝）
        type: boolean
      comment:
        description: 最终决策备注
        type: string
    type: object
  dto.GoalItem:
    properties:
      description:
        description: 目标描述（详细说明目标内容）
        type: string
      end_date:
        description: 结束时间（格式：2006-01-02 或 RFC3339）
        type: string
      priority:
        description: 优先级（1=低, 2=中, 3=高, 4=紧急）
        type: integer
      start_date:
        description: 开始时间（格式：2006-01-02 或 RFC3339）
        type: string
      success_criteria:
        description: 成功标准（如何判定目标已完成）
        type: string
      title:
        description: 目标标题
        type: string
    required:
    - description
    - end_date
    - start_date
    - title
    type: object
  dto.GoalItemResponse:
    properties:
      description:
        description: 目标描述
        type: string
      end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 结束时间（RFC3339 格式）
      goal_no:
        description: 目标序号（第几个目标）
        type: integer
      id:
        description: 目标ID
        type: integer
      priority:
        description: 目标优先级
        type: integer
      start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 开始时间（RFC3339 格式）
      status:
        description: 目标状态（pending=进行中, completed=已完成）
        type: string
      success_criteria:
        description: 成功标准（如何判定目标完成）
        type: string
      title:
        description: 目标标题
        type: string
    type: object
  dto.InitiateReviewRequest:
    properties:
      jury_member_ids:
        description: 陪审团成员ID列表（陪审团模式下需指定）
        items:
          type: integer
        type: array
      required_approvals:
        description: 所需批准数（陪审团模式下需要的最少批准数）
        type: integer
      review_mode:
        description: 审核模式（single=单人审核, jury=陪审团审核）
        enum:
        - single
        - jury
        type: string
      review_type:
        description: 审核类型（goal_review=目标审核, solution_review=方案审核, plan_review=计划审核）
        enum:
        - goal_review
        - solution_review
        - plan_review
        type: string
      target_id:
        description: 目标ID（被审核的目标、方案或计划的ID）
        type: integer
      target_type:
        description: 目标类型（goal=目标, solution=方案, plan=计划）
        type: string
    required:
    - review_mode
    - review_type
    - target_id
    - target_type
    type: object
  dto.InviteJuryRequest:
    properties:
      jury_member_ids:
        description: 陪审团成员ID列表（要邀请为陪审团成员的用户）
        items:
          type: integer
        minItems: 1
        type: array
      required_approvals:
        description: 所需批准数（陪审团审核需要的最少批准数）
        minimum: 1
        type: integer
    required:
    - jury_member_ids
    - required_approvals
    type: object
  dto.JuryMemberResponse:
    properties:
      mobile:
        description: 手机号
        type: string
      nickname:
        description: 昵称
        type: string
      status:
        description: 陪审团成员状态（pending=待回复, accepted=已接受, rejected=已拒绝）
        type: string
      user_id:
        description: 陪审团成员用户ID
        type: integer
      username:
        description: 陪审团成员用户名
        type: string
    type: object
  dto.LoginRequest:
    properties:
      mobile:
        description: 手机号码（用于登录）
        example: "13800138000"
        type: string
      password:
        description: 密码（用户登录密码）
        example: password123
        type: string
    required:
    - mobile
    - password
    type: object
  dto.LoginResponse:
    properties:
      token:
        description: JWT 访问令牌（用于后续API请求的身份验证）
        type: string
      user_info:
        description: 用户信息（包含用户基本信息和权限等）
    type: object
  dto.PaginationResponse:
    properties:
      data:
        description: 分页数据列表
      page:
        description: 当前页码
        type: integer
      page_size:
        description: 每页数量
        type: integer
      total:
        description: 数据总数
        type: integer
      total_pages:
        description: 总页数
        type: integer
    type: object
  dto.PermissionResponse:
    properties:
      description:
        description: 权限描述
        type: string
      id:
        description: 权限ID
        type: integer
      name:
        description: 权限名称
        type: string
    type: object
  dto.RegisterRequest:
    properties:
      email:
        description: 邮箱地址（选填，格式必须为有效邮箱）
        example: user@example.com
        type: string
      mobile:
        description: 手机号码（必填，格式为11位中国手机号，用于登录）
        example: "13800138000"
        type: string
      password:
        description: 密码（6-20个字符）
        example: password123
        maxLength: 20
        minLength: 6
        type: string
      username:
        description: 用户名/真实姓名（必填，支持中文，2-50个字符）
        example: 张三
        maxLength: 50
        minLength: 2
        type: string
    required:
    - mobile
    - password
    - username
    type: object
  dto.RejectTaskRequest:
    properties:
      reason:
        description: 拒绝原因（为什么拒绝接受这个任务）
        type: string
    required:
    - reason
    type: object
  dto.ResetPasswordRequest:
    properties:
      user_id:
        description: 用户ID（必填）
        type: integer
    required:
    - user_id
    type: object
  dto.ResponseTime:
    properties:
      time.Time:
        type: string
    type: object
  dto.ReviewHistoryResponse:
    properties:
      completed_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 完成时间（可选，RFC3339 格式）
      final_decision:
        description: 最终决议（可选，如果审核已完成）
        type: string
      final_decision_comment:
        description: 最终决议备注
        type: string
      id:
        description: 审核记录ID
        type: integer
      initiated_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 发起时间（RFC3339 格式）
      initiated_by:
        description: 发起人用户ID
        type: integer
      jury_members:
        description: 陪审团成员列表（陪审团模式下的成员，可选）
        items:
          $ref: '#/definitions/dto.JuryMemberResponse'
        type: array
      required_approvals:
        description: 所需批准数（陪审团模式下需要的最少批准数）
        type: integer
      review_mode:
        description: 审核模式（single=单人审核, jury=陪审团审核）
        type: string
      review_records:
        description: 审核记录列表（各个审核人的意见）
        items:
          $ref: '#/definitions/dto.ReviewRecordResponse'
        type: array
      review_type:
        description: 审核类型（goal_review=目标审核, solution_review=方案审核, plan_review=计划审核）
        type: string
      status:
        description: 审核状态（pending=进行中, approved=已批准, rejected=已拒绝, abstained=弃权）
        type: string
      target_id:
        description: 目标ID（被审核的目标、方案或计划的ID）
        type: integer
      target_type:
        description: 目标类型（goal=目标, solution=方案, plan=计划）
        type: string
    type: object
  dto.ReviewRecordResponse:
    properties:
      comment:
        description: 审核备注
        type: string
      id:
        description: 审核记录ID
        type: integer
      opinion:
        description: 审核意见（approve=批准, reject=拒绝, abstain=弃权）
        type: string
      reviewer_id:
        description: 审核人用户ID
        type: integer
      reviewer_name:
        description: 审核人用户名（可选）
        type: string
      reviewer_role:
        description: 审核人角色（reviewer=评审人, jury=陪审团成员）
        type: string
      score:
        description: 评分（可选）
        type: integer
      vote_weight:
        description: 投票权重（陪审团模式下的权重）
        type: number
    type: object
  dto.ReviewSessionResponse:
    properties:
      final_decision:
        description: 最终决议（可选）
        type: string
      final_decision_comment:
        description: 最终决议备注
        type: string
      id:
        description: 审核会话ID
        type: integer
      required_approvals:
        description: 所需批准数
        type: integer
      review_mode:
        description: 审核模式（single=单人审核, jury=陪审团审核）
        type: string
      review_records:
        description: 审核记录列表（各个审核人的意见，可选）
        items:
          $ref: '#/definitions/dto.ReviewRecordResponse'
        type: array
      review_type:
        description: 审核类型（goal_review=目标审核, solution_review=方案审核, plan_review=计划审核）
        type: string
      status:
        description: 审核状态（pending=进行中, approved=已批准, rejected=已拒绝）
        type: string
      target_id:
        description: 被审核的对象ID
        type: integer
      target_type:
        description: 目标类型
        type: string
      task_id:
        description: 关联的任务ID
        type: integer
    type: object
  dto.RoleResponse:
    properties:
      description:
        description: 角色描述
        type: string
      id:
        description: 角色ID
        type: integer
      name:
        description: 角色名称
        type: string
      permissions:
        description: 角色包含的权限列表（可选）
        items:
          $ref: '#/definitions/dto.PermissionResponse'
        type: array
    type: object
  dto.SetDefaultDepartmentRequest:
    properties:
      department_id:
        description: 部门ID（用户负责的部门中选择一个）
        type: integer
    required:
    - department_id
    type: object
  dto.SimpleUserResponse:
    properties:
      email:
        description: 邮箱地址
        type: string
      id:
        description: 用户ID
        type: integer
      nickname:
        description: 昵称
        type: string
      username:
        description: 用户名
        type: string
    type: object
  dto.SolutionItem:
    properties:
      content:
        description: 方案内容（具体的方案说明）
        type: string
      file_name:
        description: 关联的文件名（可选）
        type: string
      mindmap_markdown:
        description: 脑图 Markdown 文本（可选，用于存储脑图的原始文本）
        type: string
      mindmap_url:
        description: 思维导图URL（可选，用于可视化展示方案）
        type: string
      title:
        type: string
    required:
    - content
    - title
    type: object
  dto.SolutionListItemResponse:
    properties:
      attachments:
        description: 方案附件列表（可选）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      id:
        description: 方案版本ID
        type: integer
      status:
        description: 方案状态（pending=待审核, approved=已批准, rejected=已拒绝）
        type: string
      submitted_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 提交时间（RFC3339 格式）
      submitted_by:
        description: 提交人用户ID
        type: integer
      submitted_by_username:
        description: 提交人用户名
        type: string
      title:
        description: 方案标题（用于在列表中显示）
        type: string
      version:
        description: 方案版本号（第几版，如 v1, v2）
        type: string
    type: object
  dto.SolutionVersionResponse:
    properties:
      attachments:
        description: 方案附件列表（可选）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      content:
        description: 方案内容（具体的方案说明）
        type: string
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 创建时间（RFC3339 格式）
      file_name:
        description: 关联的文件名（可选）
        type: string
      id:
        description: 方案版本ID
        type: integer
      mindmap_markdown:
        description: 脑图 Markdown 文本（可选，用于存储脑图的原始文本）
        type: string
      mindmap_url:
        description: 思维导图URL（可选，用于展示方案的可视化）
        type: string
      status:
        description: 方案状态（pending=待审核, approved=已批准, rejected=已拒绝）
        type: string
      submitted_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 提交时间（可选，RFC3339 格式）
      submitted_by:
        description: 提交人用户ID（谁提交的这个方案版本）
        type: integer
      version:
        description: 方案版本号（第几版）
        type: integer
    type: object
  dto.SortDepartmentItem:
    properties:
      department_id:
        description: 部门ID
        type: integer
      sort_order:
        description: 排序序号（数值越小越靠前）
        minimum: 0
        type: integer
    required:
    - department_id
    type: object
  dto.SortDepartmentsRequest:
    properties:
      items:
        description: 部门排序列表（同一父级下的部门）
        items:
          $ref: '#/definitions/dto.SortDepartmentItem'
        minItems: 1
        type: array
    required:
    - items
    type: object
  dto.SubmitExecutionPlanRequest:
    properties:
      implementation_steps:
        additionalProperties: true
        description: 实施步骤
        type: object
      resource_requirements:
        description: 资源需求
        type: string
      risk_assessment:
        description: 风险评估
        type: string
      tech_stack:
        description: 技术栈
        type: string
    required:
    - implementation_steps
    - tech_stack
    type: object
  dto.SubmitExecutionPlanWithGoalsRequest:
    properties:
      attachment_ids:
        description: 附件ID集合（提交执行计划前先上传附件获取ID，提交时绑定到执行计划）
        items:
          type: integer
        type: array
      goals:
        description: 目标列表（至少一个目标）
        items:
          $ref: '#/definitions/dto.GoalItem'
        minItems: 1
        type: array
      implementation_steps:
        additionalProperties: true
        description: 实施步骤（具体的实现步骤，JSON格式）
        type: object
      resource_requirements:
        description: 资源需求（所需资源、人力、设备等）
        type: string
      risk_assessment:
        description: 风险评估（可能的风险和应对方案）
        type: string
      tech_stack:
        description: 技术栈（使用的技术和工具）
        type: string
      title:
        description: 计划标题
        type: string
    required:
    - goals
    - implementation_steps
    - tech_stack
    - title
    type: object
  dto.SubmitGoalsAndSolutionRequest:
    properties:
      goals:
        description: 目标列表
        items:
          $ref: '#/definitions/dto.GoalItem'
        minItems: 1
        type: array
      solution:
        allOf:
        - $ref: '#/definitions/dto.SolutionItem'
        description: 方案内容
    required:
    - goals
    - solution
    type: object
  dto.SubmitReviewOpinionRequest:
    properties:
      comment:
        description: 审核备注（审核人的意见和建议）
        type: string
      opinion:
        description: 审核意见（approve=批准, reject=拒绝, abstain=弃权）
        enum:
        - approve
        - reject
        - abstain
        type: string
      score:
        description: 评分（可选，用于量化评估）
        type: integer
    required:
    - opinion
    type: object
  dto.SubmitSolutionRequest:
    properties:
      attachment_ids:
        description: 附件ID集合（提交方案前先上传附件获取ID，提交时绑定到方案）
        items:
          type: integer
        type: array
      solution:
        allOf:
        - $ref: '#/definitions/dto.SolutionItem'
        description: 方案内容（只包含方案，不包含目标）
    required:
    - solution
    type: object
  dto.TaskDetailEnhancedResponse:
    properties:
      actual_end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 实际完成日期（RFC3339 格式）
      actual_start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 实际开始日期（RFC3339 格式）
      assignee:
        description: 分配人用户ID
        type: integer
      child_sequence:
        description: 在父任务中的序号
        type: integer
      completed_subtasks:
        description: 已完成的子任务数
        type: integer
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 任务创建时间
      creator:
        allOf:
        - $ref: '#/definitions/dto.SimpleUserResponse'
        description: 创建者信息（可选）
      creator_id:
        description: 创建者用户ID
        type: integer
      current_plan:
        allOf:
        - $ref: '#/definitions/dto.ExecutionPlanVersionResponse'
        description: 当前最新的执行计划（如果有，可选）
      current_review:
        allOf:
        - $ref: '#/definitions/dto.ReviewHistoryResponse'
        description: 当前进行中的审核会话（如果有，可选）
      current_solution:
        allOf:
        - $ref: '#/definitions/dto.SolutionVersionResponse'
        description: 当前最新的方案（如果有，可选）
      department_id:
        description: 所属部门ID
        type: integer
      department_name:
        description: 所属部门名称
        type: string
      description:
        description: 任务描述
        type: string
      due_date:
        description: 到期日期
        type: string
      executor:
        allOf:
        - $ref: '#/definitions/dto.SimpleUserResponse'
        description: 执行人信息（可选）
      executor_id:
        description: 执行人用户ID
        type: integer
      executor_username:
        description: 执行人用户名
        type: string
      expected_end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 期望完成日期（RFC3339 格式）
      expected_start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 期望开始日期（RFC3339 格式）
      id:
        description: 任务ID
        type: integer
      is_cross_department:
        description: 是否跨部门任务
        type: boolean
      is_in_pool:
        description: 是否在待领池中
        type: boolean
      is_template:
        description: 是否为模板任务
        type: boolean
      latest_execution_plan:
        allOf:
        - $ref: '#/definitions/dto.ExecutionPlanListItemResponse'
        description: 最新版本的执行计划（仅包含最新版本，与子任务同级展示）
      latest_solution:
        allOf:
        - $ref: '#/definitions/dto.SolutionListItemResponse'
        description: 最新版本的思路方案（仅包含最新版本，与子任务同级展示）
      my_role:
        description: 当前用户在该任务中的角色（creator/executor/jury）
        type: string
      parent_task_id:
        description: 父任务ID
        type: integer
      priority:
        description: 任务优先级（1=低，2=中，3=高，4=紧急）
        type: integer
      progress:
        description: 任务进度百分比（0-100）
        type: integer
      reporter:
        description: 报告人用户ID
        type: integer
      root_task_id:
        description: 根任务ID
        type: integer
      split_from_plan_id:
        description: 拆分来源的执行计划ID
        type: integer
      status_code:
        description: 任务状态编码
        type: string
      subtasks:
        description: 子任务列表（与思路方案、执行计划同级展示，支持递归）
        items:
          $ref: '#/definitions/dto.TaskResponse'
        type: array
      tags:
        description: 任务标签列表
        items:
          type: string
        type: array
      task_attachments:
        description: 任务附件列表（仅任务本身的附件，不含方案和计划附件）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      task_level:
        description: 任务层级（0=顶层）
        type: integer
      task_no:
        description: 任务编号（唯一标识）
        type: string
      task_path:
        description: 任务路径（如 "1/5/12"）
        type: string
      task_status:
        allOf:
        - $ref: '#/definitions/dto.TaskStatusResponse'
        description: 任务状态信息（可选）
      task_type:
        allOf:
        - $ref: '#/definitions/dto.TaskTypeResponse'
        description: 任务类型信息（可选）
      task_type_code:
        description: 任务类型编码
        type: string
      title:
        description: 任务标题
        type: string
      total_subtasks:
        description: 子任务总数
        type: integer
      updated_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 任务更新时间
    type: object
  dto.TaskDetailResponse:
    properties:
      actual_end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 实际完成日期（RFC3339 格式）
      actual_start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 实际开始日期（RFC3339 格式）
      assignee:
        description: 分配人用户ID
        type: integer
      child_sequence:
        description: 在父任务中的序号
        type: integer
      completed_subtasks:
        description: 已完成的子任务数
        type: integer
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 任务创建时间
      creator:
        allOf:
        - $ref: '#/definitions/dto.SimpleUserResponse'
        description: 创建者信息（可选）
      creator_id:
        description: 创建者用户ID
        type: integer
      department_id:
        description: 所属部门ID
        type: integer
      department_name:
        description: 所属部门名称
        type: string
      description:
        description: 任务描述
        type: string
      due_date:
        description: 到期日期
        type: string
      executor:
        allOf:
        - $ref: '#/definitions/dto.SimpleUserResponse'
        description: 执行人信息（可选）
      executor_id:
        description: 执行人用户ID
        type: integer
      executor_username:
        description: 执行人用户名
        type: string
      expected_end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 期望完成日期（RFC3339 格式）
      expected_start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 期望开始日期（RFC3339 格式）
      id:
        description: 任务ID
        type: integer
      is_cross_department:
        description: 是否跨部门任务
        type: boolean
      is_in_pool:
        description: 是否在待领池中
        type: boolean
      is_template:
        description: 是否为模板任务
        type: boolean
      latest_execution_plan:
        allOf:
        - $ref: '#/definitions/dto.ExecutionPlanListItemResponse'
        description: 最新版本的执行计划（仅包含最新版本，与子任务同级展示）
      latest_solution:
        allOf:
        - $ref: '#/definitions/dto.SolutionListItemResponse'
        description: 最新版本的思路方案（仅包含最新版本，与子任务同级展示）
      my_role:
        description: 当前用户在该任务中的角色（creator/executor/jury）
        type: string
      parent_task_id:
        description: 父任务ID
        type: integer
      priority:
        description: 任务优先级（1=低，2=中，3=高，4=紧急）
        type: integer
      progress:
        description: 任务进度百分比（0-100）
        type: integer
      reporter:
        description: 报告人用户ID
        type: integer
      root_task_id:
        description: 根任务ID
        type: integer
      split_from_plan_id:
        description: 拆分来源的执行计划ID
        type: integer
      status_code:
        description: 任务状态编码
        type: string
      subtasks:
        description: 子任务列表（与思路方案、执行计划同级展示，支持递归）
        items:
          $ref: '#/definitions/dto.TaskResponse'
        type: array
      tags:
        description: 任务标签列表
        items:
          type: string
        type: array
      task_attachments:
        description: 任务附件列表（仅任务本身的附件，不含方案和计划附件）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      task_level:
        description: 任务层级（0=顶层）
        type: integer
      task_no:
        description: 任务编号（唯一标识）
        type: string
      task_path:
        description: 任务路径（如 "1/5/12"）
        type: string
      task_status:
        allOf:
        - $ref: '#/definitions/dto.TaskStatusResponse'
        description: 任务状态信息（可选）
      task_type:
        allOf:
        - $ref: '#/definitions/dto.TaskTypeResponse'
        description: 任务类型信息（可选）
      task_type_code:
        description: 任务类型编码
        type: string
      title:
        description: 任务标题
        type: string
      total_subtasks:
        description: 子任务总数
        type: integer
      updated_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 任务更新时间
    type: object
  dto.TaskRequest:
    properties:
      attachment_ids:
        description: 附件ID集合（创建任务前先上传附件获取ID，创建任务时绑定）
        items:
          type: integer
        type: array
      department_id:
        description: 所属部门ID（任务所属的部门，可选）
        type: integer
      description:
        description: 任务描述（详细的任务说明和需求）
        type: string
      executor_id:
        description: 执行人用户ID（任务的具体执行者，可选）
        type: integer
      expected_end_date:
        description: 期望完成日期（任务预计何时完成，可选，支持格式：2006-01-02 或 RFC3339 格式）
        type: string
      expected_start_date:
        description: 期望开始日期（任务预计何时开始，可选，支持格式：2006-01-02 或 RFC3339 格式）
        type: string
      is_in_pool:
        description: 是否在待领池（true=未指派执行人，需要其他人认领）
        type: boolean
      parent_task_id:
        description: 父任务ID（用于建立任务层级关系，可选）
        type: integer
      priority:
        description: 任务优先级（1=低，2=中，3=高，4=紧急）
        type: integer
      root_task_id:
        description: 根任务ID（用于快速定位顶层任务，可选）
        type: integer
      solution_deadline:
        description: 思路方案截止天数（仅需求类任务适用，表示执行人接受任务后需在N天内提交方案，0表示不限制）
        type: integer
      status_code:
        description: 任务状态编码（关联 task_statuses.code，可选，默认为初始状态）
        type: string
      task_level:
        description: 任务层级（0=顶层任务，1=一级子任务，以此类推）
        type: integer
      task_no:
        description: 任务编号（唯一，可选，如不提供则系统自动生成。格式为：任务类型前缀-6位随机字母数字）
        type: string
      task_type_code:
        description: 任务类型编码（如：需求、缺陷、功能等，关联 task_types.code）
        type: string
      title:
        description: 任务标题（简要描述任务内容）
        type: string
    required:
    - task_type_code
    - title
    type: object
  dto.TaskResponse:
    properties:
      actual_end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 实际完成日期（RFC3339 格式）
      actual_start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 实际开始日期（RFC3339 格式）
      assignee:
        description: 分配人用户ID
        type: integer
      child_sequence:
        description: 在父任务中的序号
        type: integer
      completed_subtasks:
        description: 已完成的子任务数
        type: integer
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 任务创建时间
      creator_id:
        description: 创建者用户ID
        type: integer
      department_id:
        description: 所属部门ID
        type: integer
      department_name:
        description: 所属部门名称
        type: string
      description:
        description: 任务描述
        type: string
      due_date:
        description: 到期日期
        type: string
      executor_id:
        description: 执行人用户ID
        type: integer
      executor_username:
        description: 执行人用户名
        type: string
      expected_end_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 期望完成日期（RFC3339 格式）
      expected_start_date:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 期望开始日期（RFC3339 格式）
      id:
        description: 任务ID
        type: integer
      is_cross_department:
        description: 是否跨部门任务
        type: boolean
      is_in_pool:
        description: 是否在待领池中
        type: boolean
      is_template:
        description: 是否为模板任务
        type: boolean
      latest_execution_plan:
        allOf:
        - $ref: '#/definitions/dto.ExecutionPlanListItemResponse'
        description: 最新版本的执行计划（仅包含最新版本，与子任务同级展示）
      latest_solution:
        allOf:
        - $ref: '#/definitions/dto.SolutionListItemResponse'
        description: 最新版本的思路方案（仅包含最新版本，与子任务同级展示）
      my_role:
        description: 当前用户在该任务中的角色（creator/executor/jury）
        type: string
      parent_task_id:
        description: 父任务ID
        type: integer
      priority:
        description: 任务优先级（1=低，2=中，3=高，4=紧急）
        type: integer
      progress:
        description: 任务进度百分比（0-100）
        type: integer
      reporter:
        description: 报告人用户ID
        type: integer
      root_task_id:
        description: 根任务ID
        type: integer
      split_from_plan_id:
        description: 拆分来源的执行计划ID
        type: integer
      status_code:
        description: 任务状态编码
        type: string
      subtasks:
        description: 子任务列表（与思路方案、执行计划同级展示，支持递归）
        items:
          $ref: '#/definitions/dto.TaskResponse'
        type: array
      tags:
        description: 任务标签列表
        items:
          type: string
        type: array
      task_attachments:
        description: 任务附件列表（仅任务本身的附件，不含方案和计划附件）
        items:
          $ref: '#/definitions/dto.AttachmentDetailResult'
        type: array
      task_level:
        description: 任务层级（0=顶层）
        type: integer
      task_no:
        description: 任务编号（唯一标识）
        type: string
      task_path:
        description: 任务路径（如 "1/5/12"）
        type: string
      task_type_code:
        description: 任务类型编码
        type: string
      title:
        description: 任务标题
        type: string
      total_subtasks:
        description: 子任务总数
        type: integer
      updated_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 任务更新时间
    type: object
  dto.TaskStatusResponse:
    properties:
      code:
        description: 任务状态编码
        type: string
      id:
        description: 任务状态ID
        type: integer
      name:
        description: 任务状态名称
        type: string
    type: object
  dto.TaskStatusTransitionRequest:
    properties:
      comment:
        description: 转换备注（状态转换的原因或说明，可选）
        type: string
      to_status_code:
        description: 目标状态编码（要转换到的目标状态）
        type: string
    required:
    - to_status_code
    type: object
  dto.TaskTypeResponse:
    properties:
      code:
        description: 任务类型编码（如：需求、缺陷等）
        type: string
      id:
        description: 任务类型ID
        type: integer
      name:
        description: 任务类型名称
        type: string
    type: object
  dto.TimelineEventResponse:
    properties:
      content:
        description: 事件内容详情
        type: string
      created_at:
        allOf:
        - $ref: '#/definitions/dto.ResponseTime'
        description: 事件发生时间（RFC3339 格式）
      event_type:
        description: 事件类型（solution_submitted=方案提交, plan_submitted=计划提交, review_started=审核开始,
          status_changed=状态变更）
        type: string
      id:
        description: 时间轴事件ID
        type: integer
      title:
        description: 事件标题
        type: string
      user_id:
        description: 事件发起人用户ID
        type: integer
      username:
        description: 事件发起人用户名
        type: string
    type: object
  dto.UpdateProfileRequest:
    properties:
      mobile:
        description: 新手机号（11位中国手机号，可选）
        type: string
    type: object
  dto.UpdateTaskRequest:
    properties:
      actual_end_date:
        description: 实际完成日期（可选，支持多种日期格式）
        type: string
      actual_start_date:
        description: 实际开始日期（可选，支持多种日期格式）
        type: string
      assignee:
        description: 分配人ID（可选）
        type: integer
      attachments:
        description: 任务附件列表（可选）
        items:
          type: string
        type: array
      child_sequence:
        description: 在父任务中的序号（可选）
        type: integer
      completed_subtasks:
        description: 已完成的子任务数（可选）
        type: integer
      created_at:
        description: 创建时间（可选）
        type: string
      creator_id:
        description: 创建者用户ID（可选）
        type: integer
      deleted_at:
        description: 删除时间（可选）
        type: string
      department_id:
        description: 所属部门ID（可选）
        type: integer
      description:
        description: 任务描述（可选）
        type: string
      due_date:
        description: 到期日期（可选，支持多种日期格式）
        type: string
      executor_id:
        description: 执行人用户ID（可选，传负值如-1表示清空执行人）
        type: integer
      expected_end_date:
        description: 期望完成日期（可选，支持多种日期格式）
        type: string
      expected_start_date:
        description: 期望开始日期（可选，支持多种日期格式）
        type: string
      is_cross_department:
        description: 是否跨部门（可选）
        type: boolean
      is_in_pool:
        description: 是否在待领池（可选）
        type: boolean
      is_template:
        description: 是否为模板任务（可选）
        type: boolean
      parent_task_id:
        description: 父任务ID（可选）
        type: integer
      priority:
        description: 任务优先级（可选）
        type: integer
      progress:
        description: 任务进度百分比（0-100，可选）
        type: integer
      reporter:
        description: 报告人ID（可选）
        type: integer
      root_task_id:
        description: 根任务ID（可选）
        type: integer
      solution_deadline:
        description: 思路方案截止天数（仅需求类任务适用，表示执行人接受任务后需在N天内提交方案，0表示不限制，可选）
        type: integer
      split_from_plan_id:
        description: 拆分来源的执行计划ID（可选）
        type: integer
      status_code:
        description: 任务状态编码（可选）
        type: string
      tags:
        description: 任务标签（可选）
        items:
          type: string
        type: array
      task_level:
        description: 任务层级（可选）
        type: integer
      task_no:
        description: 任务编号（可选）
        type: string
      task_path:
        description: 任务路径（可选）
        type: string
      task_type_code:
        description: 任务类型编码（可选）
        type: string
      title:
        description: 任务标题（可选）
        type: string
      total_subtasks:
        description: 子任务总数（可选）
        type: integer
      updated_at:
        description: 更新时间（可选）
        type: string
    type: object
  dto.UpdateUserRequest:
    properties:
      email:
        description: 邮箱地址（唯一，格式必须为有效邮箱，可选）
        type: string
      mobile:
        description: 手机号码（11位中国手机号，可选）
        type: string
      nickname:
        description: 昵称（用于显示的用户名，可选）
        type: string
      username:
        description: 用户名（唯一，字母数字组合，可选）
        type: string
    type: object
  dto.UserDepartmentResponse:
    properties:
      description:
        description: 部门描述
        type: string
      id:
        description: 部门ID
        type: integer
      is_default:
        description: 是否为默认部门
        type: boolean
      name:
        description: 部门名称
        type: string
    type: object
  dto.UserResponse:
    properties:
      department:
        allOf:
        - $ref: '#/definitions/dto.DepartmentResponse'
        description: 所属部门信息（可选）
      email:
        description: 邮箱地址
        type: string
      id:
        description: 用户ID
        type: integer
      managed_departments:
        description: 管理的部门列表（用户作为负责人的部门，可选）
        items:
          $ref: '#/definitions/dto.DepartmentResponse'
        type: array
      mobile:
        description: 手机号码
        type: string
      nickname:
        description: 用户昵称
        type: string
      roles:
        description: 用户拥有的角色列表（可选）
        items:
          $ref: '#/definitions/dto.RoleResponse'
        type: array
      status:
        description: 用户状态（1=正常, 2=待审核, 3=禁用）
        type: integer
      username:
        description: 用户名
        type: string
    type: object
  dto.WechatBindRequest:
    properties:
      mobile:
        description: 手机号码
        example: "13800138000"
        type: string
      password:
        description: 密码
        example: password123
        maxLength: 20
        minLength: 6
        type: string
      temp_token:
        description: 临时凭证
        type: string
      username:
        description: 用户名/真实姓名
        example: 张三
        maxLength: 50
        minLength: 2
        type: string
    required:
    - mobile
    - password
    - temp_token
    - username
    type: object
  dto.WechatLoginRequest:
    properties:
      code:
        description: 微信授权码
        example: 021xxx
        type: string
      login_type:
        description: 登录类型：scan-扫码登录，mp-小程序登录，h5-公众号H5登录
        enum:
        - scan
        - mp
        - h5
        example: scan
        type: string
      phone_code:
        description: 手机号授权码（小程序获取手机号时使用，可选）
        example: xxx
        type: string
    required:
    - code
    - login_type
    type: object
  dto.WechatLoginResponse:
    properties:
      need_bind:
        description: 是否需要绑定手机号（新用户需要补充信息）
        type: boolean
      temp_token:
        description: 临时凭证（用于绑定手机号时使用）
        type: string
      token:
        description: JWT令牌（已绑定用户直接返回）
        type: string
      user_info:
        description: 用户信息（已绑定用户返回）
      wechat_info:
        allOf:
        - $ref: '#/definitions/dto.WechatUserInfo'
        description: 微信用户信息（需要绑定时返回）
    type: object
  dto.WechatUserInfo:
    properties:
      avatar:
        type: string
      mobile:
        description: 微信绑定的手机号（从微信获取）
        type: string
      nickname:
        type: string
      openid:
        type: string
      unionid:
        type: string
    type: object
  models.Department:
    properties:
      created_at:
        description: 创建时间
        type: string
      description:
        description: 部门描述
        type: string
      id:
        description: 主键ID
        type: integer
      leaders:
        description: 部门负责人（多对多）
        items:
          $ref: '#/definitions/models.User'
        type: array
      name:
        description: 部门名称
        type: string
      parent_id:
        description: 父部门ID（可空）
        type: integer
      sort_order:
        description: 排序序号（同级部门内排序，数值越小越靠前）
        type: integer
      status:
        description: 状态：1=正常，2=禁用
        type: integer
      updated_at:
        description: 更新时间
        type: string
    type: object
  models.Permission:
    properties:
      created_at:
        description: 创建时间
        type: string
      description:
        description: 权限描述
        type: string
      id:
        description: 主键ID
        type: integer
      name:
        description: 权限名称（唯一）
        type: string
      updated_at:
        description: 更新时间
        type: string
    type: object
  models.Role:
    properties:
      created_at:
        description: 创建时间
        type: string
      description:
        description: 角色描述
        type: string
      id:
        description: 主键ID
        type: integer
      name:
        description: 角色名称（唯一）
        type: string
      permissions:
        description: 该角色拥有的权限（多对多）
        items:
          $ref: '#/definitions/models.Permission'
        type: array
      updated_at:
        description: 更新时间
        type: string
    type: object
  models.Task:
    properties:
      actual_end_date:
        description: 实际结束日期（可空）
        type: string
      actual_start_date:
        description: 实际开始日期（可空）
        type: string
      child_sequence:
        description: 在父任务中的序号（排序用）
        type: integer
      completed_subtasks:
        description: 已完成的直接子任务数
        type: integer
      created_at:
        description: 创建时间
        type: string
      creator_id:
        description: 创建者用户ID
        type: integer
      department_id:
        description: 所属部门ID（可空）
        type: integer
      description:
        description: 描述（文本）
        type: string
      executor_id:
        description: 执行人用户ID（可空）
        type: integer
      expected_end_date:
        description: 期望结束日期（可空）
        type: string
      expected_start_date:
        description: 期望开始日期（可空）
        type: string
      id:
        description: 主键ID
        type: integer
      is_cross_department:
        description: 是否跨部门
        type: boolean
      is_in_pool:
        description: 是否在待领池（未指派执行人）
        type: boolean
      is_template:
        description: 是否为模板任务
        type: boolean
      parent_task_id:
        description: 父任务ID（可空）
        type: integer
      priority:
        description: 优先级：1-低，2-中，3-高，4-紧急
        type: integer
      progress:
        description: 进度百分比 0-100
        type: integer
      root_task_id:
        description: 根任务ID（可空，用于快速定位顶层任务）
        type: integer
      solution_deadline:
        description: 思路方案截止天数（需求类任务创建时可设定，表示执行人接受任务后需在N天内提交方案，0表示不限制）
        type: integer
      split_at:
        description: 拆分时间（可空）
        type: string
      split_from_plan_id:
        description: 拆分来源的执行计划ID（可空）
        type: integer
      status_code:
        description: 状态编码（关联 task_statuses.code）
        type: string
      tags:
        description: 标签（多对多，关联 task_tag_rel 表）
        items:
          $ref: '#/definitions/models.TaskTag'
        type: array
      task_level:
        description: 任务层级：0=顶层，1=一级子任务...
        type: integer
      task_no:
        description: 任务编号，唯一（如 REQ-2024-001）
        type: string
      task_path:
        description: 任务路径（如 "1/5/12"），便于检索整个树
        type: string
      task_type_code:
        description: 任务类型编码（关联 task_types.code）
        type: string
      title:
        description: 标题
        type: string
      total_subtasks:
        description: 直接子任务总数（冗余，优化查询）
        type: integer
      updated_at:
        description: 更新时间
        type: string
    type: object
  models.TaskTag:
    properties:
      color:
        description: 颜色（前端显示）
        type: string
      created_at:
        description: 创建时间
        type: string
      description:
        description: 描述
        type: string
      id:
        description: 主键ID
        type: integer
      name:
        description: 标签名称（唯一）
        type: string
      tasks:
        description: 关联的任务（多对多，使用 task_tag_rel 作为 join 表）
        items:
          $ref: '#/definitions/models.Task'
        type: array
      updated_at:
        description: 更新时间
        type: string
    type: object
  models.User:
    properties:
      avatar:
        description: 用户头像URL
        type: string
      created_at:
        description: 创建时间
        type: string
      department:
        allOf:
        - $ref: '#/definitions/models.Department'
        description: 部门关联
      department_id:
        description: 部门ID
        type: integer
      email:
        description: 邮箱（选填，唯一）
        type: string
      id:
        description: 主键ID
        type: integer
      is_department_leader:
        description: 是否是部门负责人
        type: boolean
      job_title:
        description: 职位名称
        type: string
      managed_departments:
        description: 管理的部门（多对多，作为负责人）
        items:
          $ref: '#/definitions/models.Department'
        type: array
      mobile:
        description: 手机号（唯一，用于登录）
        type: string
      nickname:
        description: 昵称（用于显示）
        type: string
      roles:
        description: 角色列表（多对多）
        items:
          $ref: '#/definitions/models.Role'
        type: array
      status:
        description: 状态：1-正常，3-禁用，2-待审核
        type: integer
      updated_at:
        description: 更新时间
        type: string
      username:
        description: 用户名/真实姓名（支持中文）
        type: string
      wechat_openid:
        description: 微信OpenID（单应用内唯一）
        type: string
      wechat_unionid:
        description: 微信UnionID（跨应用唯一)
        type: string
    type: object
  utils.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
    type: object
host: 10.0.10.113:7777
info:
  contact:
    email: support@example.com
    name: API Support
  description: 北极星任务管理系统的 RESTful API 接口文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: 北极星任务管理系统 API
  version: "1.0"
paths:
  /admin/permissions:
    get:
      consumes:
      - application/json
      description: 获取系统中所有权限
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.PermissionResponse'
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取权限列表
      tags:
      - 系统管理
  /admin/roles:
    get:
      consumes:
      - application/json
      description: 获取系统中所有角色
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.RoleResponse'
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取角色列表
      tags:
      - 系统管理
  /auth/login:
    post:
      consumes:
      - application/json
      description: 用户使用手机号和密码登录，返回JWT令牌
      parameters:
      - description: 登录凭证
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功，返回token
          schema:
            $ref: '#/definitions/dto.LoginResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 手机号或密码错误
          schema:
            additionalProperties: true
            type: object
      summary: 用户登录
      tags:
      - 认证
  /auth/register:
    post:
      consumes:
      - application/json
      description: 新用户注册，注册后需要等待管理员审核
      parameters:
      - description: 注册信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 注册成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
      summary: 用户注册
      tags:
      - 认证
  /auth/wechat/bind:
    post:
      consumes:
      - application/json
      description: 微信新用户绑定手机号并设置密码完成注册
      parameters:
      - description: 绑定请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.WechatBindRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 注册成功
          schema:
            $ref: '#/definitions/dto.LoginResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
      summary: 微信绑定手机号
      tags:
      - 认证
  /auth/wechat/login:
    post:
      consumes:
      - application/json
      description: 使用微信授权码登录，支持扫码登录、小程序登录、公众号H5登录
      parameters:
      - description: 微信登录请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.WechatLoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录结果
          schema:
            $ref: '#/definitions/dto.WechatLoginResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
      summary: 微信登录
      tags:
      - 认证
  /departments:
    get:
      consumes:
      - application/json
      description: 获取所有部门
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/models.Department'
      security:
      - BearerAuth: []
      summary: 获取部门列表
      tags:
      - 部门管理
    post:
      consumes:
      - application/json
      description: 创建新部门
      parameters:
      - description: 部门信息
        in: body
        name: department
        required: true
        schema:
          $ref: '#/definitions/dto.DepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 创建部门
      tags:
      - 部门管理
  /departments/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定部门
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 删除部门
      tags:
      - 部门管理
    get:
      consumes:
      - application/json
      description: 获取部门详情，包含负责人信息
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.DepartmentDetailResponse'
      security:
      - BearerAuth: []
      summary: 获取部门详情
      tags:
      - 部门管理
    put:
      consumes:
      - application/json
      description: 更新部门信息
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 部门信息
        in: body
        name: department
        required: true
        schema:
          $ref: '#/definitions/dto.DepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 更新部门
      tags:
      - 部门管理
  /departments/{id}/leaders:
    post:
      consumes:
      - application/json
      description: 为部门添加负责人
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 负责人信息
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/dto.AddLeaderRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 添加成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 添加负责人
      tags:
      - 部门管理
  /departments/{id}/leaders/{userId}:
    delete:
      consumes:
      - application/json
      description: 移除部门负责人
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 移除成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 移除负责人
      tags:
      - 部门管理
  /departments/{id}/users:
    post:
      consumes:
      - application/json
      description: 批量分配人员到部门
      parameters:
      - description: 部门ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户ID列表
        in: body
        name: userIds
        required: true
        schema:
          items:
            type: integer
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 分配人员
      tags:
      - 部门管理
  /departments/batch-import:
    post:
      consumes:
      - application/json
      description: 批量导入组织架构，支持父子关系依赖。parent_name为-1表示顶级部门，为字符串表示上级部门名称
      parameters:
      - description: 部门列表
        in: body
        name: departments
        required: true
        schema:
          items:
            $ref: '#/definitions/dto.BatchImportDepartmentItem'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: 导入结果
          schema:
            $ref: '#/definitions/dto.BatchImportDepartmentResult'
      security:
      - BearerAuth: []
      summary: 批量导入部门
      tags:
      - 部门管理
  /departments/default:
    put:
      consumes:
      - application/json
      description: 用户可以在自己负责的部门中选择一个设置为默认部门（仅负责人可用）
      parameters:
      - description: 部门信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SetDefaultDepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 设置成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 设置用户默认部门
      tags:
      - 部门管理
  /departments/my-departments:
    get:
      consumes:
      - application/json
      description: 获取当前用户负责的所有部门，包含默认部门标识
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            items:
              $ref: '#/definitions/dto.UserDepartmentResponse'
            type: array
      security:
      - BearerAuth: []
      summary: 获取用户负责的部门列表
      tags:
      - 部门管理
  /departments/sort:
    post:
      consumes:
      - application/json
      description: 对同一父级下的部门进行排序，支持顶级部门排序和子部门排序
      parameters:
      - description: 排序信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SortDepartmentsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 排序成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 部门排序
      tags:
      - 部门管理
  /departments/tree:
    get:
      consumes:
      - application/json
      description: 获取部门树形结构，按排序序号排序
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            items:
              $ref: '#/definitions/dto.DepartmentTreeResponse'
            type: array
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取部门树结构
      tags:
      - 部门管理
  /profile:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的详细信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.UserResponse'
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 用户不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取当前用户信息
      tags:
      - 用户管理
  /review-sessions/{sessionId}:
    get:
      consumes:
      - application/json
      description: 查看审核会话的详细信息和投票情况
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            $ref: '#/definitions/dto.ReviewSessionResponse'
      security:
      - BearerAuth: []
      summary: 获取审核会话详情
      tags:
      - 任务流程
  /review-sessions/{sessionId}/finalize:
    post:
      consumes:
      - application/json
      description: 创建人做出最终审核决策
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 决策
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.FinalizeReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 决策完成
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 最终决策
      tags:
      - 任务流程
  /review-sessions/{sessionId}/invite-jury:
    post:
      consumes:
      - application/json
      description: 创建人将单人审核转为陪审团审核
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 陪审团成员
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.InviteJuryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 邀请成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 邀请陪审团
      tags:
      - 任务流程
  /review-sessions/{sessionId}/jury/{juryMemberId}:
    delete:
      consumes:
      - application/json
      description: 创建人移除指定的陪审团成员
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 陪审团成员ID
        in: path
        name: juryMemberId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 移除成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 移除陪审团成员
      tags:
      - 任务流程
  /review-sessions/{sessionId}/opinion:
    post:
      consumes:
      - application/json
      description: 陪审团成员提交审核意见
      parameters:
      - description: 审核会话ID
        in: path
        name: sessionId
        required: true
        type: integer
      - description: 审核意见
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitReviewOpinionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交审核意见
      tags:
      - 任务流程
  /task-flow/statuses:
    get:
      consumes:
      - application/json
      description: 根据任务类型获取该类型的所有状态列表（按排序顺序）
      parameters:
      - description: 任务类型编码（如 requirement, unit_task）
        in: query
        name: task_type_code
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务状态列表
      tags:
      - 任务流程
  /task-flow/tasks/{task_id}/allowed-transitions:
    get:
      consumes:
      - application/json
      description: 根据任务ID和当前用户，获取该任务当前允许的所有状态转换
      parameters:
      - description: 任务ID
        in: path
        name: task_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务允许的状态转换
      tags:
      - 任务流程
  /tasks:
    get:
      consumes:
      - application/json
      description: 获取任务列表，支持分页和多条件过滤。普通用户获取所属部门任务，部门负责人获取所负责部门任务，管理员获取所有任务
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务编号（模糊搜索）
        in: query
        name: task_no
        type: string
      - description: 任务标题（模糊搜索）
        in: query
        name: title
        type: string
      - description: 任务类型编码
        in: query
        name: task_type_code
        type: string
      - description: 状态编码
        in: query
        name: status_code
        type: string
      - description: 创建人ID
        in: query
        name: creator_id
        type: integer
      - description: 执行人ID
        in: query
        name: executor_id
        type: integer
      - description: 部门ID
        in: query
        name: department_id
        type: integer
      - description: 优先级
        in: query
        name: priority
        type: integer
      - description: 是否在待领池
        in: query
        name: is_in_pool
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            $ref: '#/definitions/dto.PaginationResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务列表
      tags:
      - 任务管理
    post:
      consumes:
      - application/json
      description: 创建一个新的任务
      parameters:
      - description: 任务信息
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/dto.TaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 创建任务
      tags:
      - 任务管理
  /tasks/{id}:
    delete:
      consumes:
      - application/json
      description: 软删除任务（有子任务时无法删除）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的任务ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 删除失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 删除任务
      tags:
      - 任务管理
    get:
      consumes:
      - application/json
      description: 获取任务基本信息和当前最新版本的方案、执行计划、以及当前进行中的审核会话，包含当前用户角色
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功，包含 my_role 字段标识当前用户角色
          schema:
            $ref: '#/definitions/dto.TaskDetailEnhancedResponse'
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 任务不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务详情（包含最新版本的方案和计划）
      tags:
      - 任务详情
    put:
      consumes:
      - application/json
      description: 更新任务信息，支持部分字段更新
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新的任务信息
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 更新失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 更新任务
      tags:
      - 任务管理
  /tasks/{id}/accept:
    post:
      consumes:
      - application/json
      description: 执行人接受被指派的任务，需求类任务接受后进入待提交方案状态
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 接受成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 接受任务
      tags:
      - 任务流程
  /tasks/{id}/assign:
    post:
      consumes:
      - application/json
      description: 为任务分配执行人，自动更新待领池状态
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 执行人信息
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/dto.AssignExecutorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 分配失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 分配执行人
      tags:
      - 任务管理
  /tasks/{id}/change-logs:
    get:
      consumes:
      - application/json
      description: 查询任务的所有状态变更和字段更新记录，按时间从新到旧排序
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            items:
              $ref: '#/definitions/dto.ChangeLogResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务的变更历史
      tags:
      - 任务详情
  /tasks/{id}/execution-plan:
    post:
      consumes:
      - application/json
      description: 执行人提交需求任务的执行计划和目标（合并提交）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 执行计划和目标
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitExecutionPlanWithGoalsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交执行计划和目标
      tags:
      - 任务流程
  /tasks/{id}/execution-plans:
    get:
      consumes:
      - application/json
      description: 查询任务的所有执行计划版本历史(包含关联的目标)，按版本号从新到旧排序
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            items:
              $ref: '#/definitions/dto.ExecutionPlanVersionResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务的所有执行计划版本
      tags:
      - 任务详情
  /tasks/{id}/goals:
    post:
      consumes:
      - application/json
      deprecated: true
      description: 此接口已废弃，请使用 POST /tasks/{id}/solution 提交方案
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 目标和方案
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitGoalsAndSolutionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交目标和方案（已废弃）
      tags:
      - 任务流程
  /tasks/{id}/plan:
    post:
      consumes:
      - application/json
      deprecated: true
      description: 此接口已废弃，请使用 POST /tasks/{id}/execution-plan 同时提交执行计划和目标
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 执行计划
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitExecutionPlanRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交执行计划（已废弃）
      tags:
      - 任务流程
  /tasks/{id}/reject:
    post:
      consumes:
      - application/json
      description: 执行人拒绝被指派的任务
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 拒绝原因
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.RejectTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 拒绝成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 拒绝任务
      tags:
      - 任务流程
  /tasks/{id}/review:
    post:
      consumes:
      - application/json
      description: 创建人发起方案或执行计划审核
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 审核配置
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.InitiateReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 审核发起成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 发起审核
      tags:
      - 任务流程
  /tasks/{id}/reviews:
    get:
      consumes:
      - application/json
      description: 查询任务的所有审核会话、审核记录和陪审团信息，包括已完成和进行中的审核
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            items:
              $ref: '#/definitions/dto.ReviewHistoryResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务的所有审核历史
      tags:
      - 任务详情
  /tasks/{id}/solution:
    post:
      consumes:
      - application/json
      description: 执行人提交需求任务的解决方案（不包含目标，目标将在执行计划阶段提交）
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 解决方案
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitSolutionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 提交成功
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 提交解决方案
      tags:
      - 任务流程
  /tasks/{id}/solutions:
    get:
      consumes:
      - application/json
      description: 查询任务的所有思路方案版本历史，按版本号从新到旧排序
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            items:
              $ref: '#/definitions/dto.SolutionVersionResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务的所有方案版本
      tags:
      - 任务详情
  /tasks/{id}/timeline:
    get:
      consumes:
      - application/json
      description: 获取任务的完整时间轴，包括方案提交、计划提交、审核进度、状态变更等所有事件，按时间从旧到新排序
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功
          schema:
            items:
              $ref: '#/definitions/dto.TimelineEventResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取任务的时间轴视图
      tags:
      - 任务详情
  /tasks/{id}/transit:
    post:
      consumes:
      - application/json
      description: 执行任务状态转换，验证状态有效性并记录变更日志
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      - description: 状态转换信息
        in: body
        name: transition
        required: true
        schema:
          $ref: '#/definitions/dto.TaskStatusTransitionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 状态转换成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 状态转换失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 执行状态转换
      tags:
      - 任务管理
  /tasks/current:
    get:
      consumes:
      - application/json
      description: 根据上下文中的任务ID获取任务基本信息
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/models.Task'
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 任务不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取当前任务信息
      tags:
      - 任务管理
  /tasks/my:
    get:
      consumes:
      - application/json
      description: 查询当前登录用户相关的任务，包括自己发布的、自己执行的、被邀请陪审的任务
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 任务编号（模糊搜索）
        in: query
        name: task_no
        type: string
      - description: 任务标题（模糊搜索）
        in: query
        name: title
        type: string
      - description: 任务类型编码
        in: query
        name: task_type_code
        type: string
      - description: 状态编码
        in: query
        name: status_code
        type: string
      - description: 优先级
        in: query
        name: priority
        type: integer
      - default: all
        description: 筛选角色：all/creator/executor/jury
        in: query
        name: my_role
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 查询成功，返回数据中包含 my_role 字段标识用户角色
          schema:
            $ref: '#/definitions/dto.PaginationResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取我的任务列表
      tags:
      - 任务管理
  /upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传文件并保存附件记录，返回附件ID。task_id可为空，后续创建任务时再绑定。传solution_id或plan_id时task_id必传
      parameters:
      - description: 上传的文件
        in: formData
        name: file
        required: true
        type: file
      - description: 存储目录
        in: formData
        name: directory
        type: string
      - description: 关联任务ID（传solution_id或plan_id时必传）
        in: formData
        name: task_id
        type: integer
      - description: 关联方案ID（当attachment_type为solution时使用）
        in: formData
        name: solution_id
        type: integer
      - description: 关联执行计划ID（当attachment_type为plan时使用）
        in: formData
        name: plan_id
        type: integer
      - description: 附件类型(requirement/solution/plan/general/task)
        in: formData
        name: attachment_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/dto.AttachmentResult'
        "400":
          description: 请求错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 上传文件
      tags:
      - 文件上传
  /upload/{id}:
    delete:
      description: 删除指定的附件记录，如果提供task_id则记录变更日志
      parameters:
      - description: 附件ID
        in: path
        name: id
        required: true
        type: integer
      - description: 关联任务ID（可选，提供则记录变更日志）
        in: query
        name: task_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/utils.Response'
        "400":
          description: 请求错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 删除附件
      tags:
      - 文件上传
  /upload/avatar:
    post:
      consumes:
      - multipart/form-data
      description: 上传用户头像并保存附件记录
      parameters:
      - description: 头像文件
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/dto.AttachmentResult'
        "400":
          description: 请求错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 上传头像
      tags:
      - 文件上传
  /upload/driver:
    post:
      consumes:
      - multipart/form-data
      description: 使用指定的存储驱动上传文件并保存附件记录。传solution_id或plan_id时task_id必传
      parameters:
      - description: 上传的文件
        in: formData
        name: file
        required: true
        type: file
      - description: 驱动类型(local/minio/aliyun)
        in: formData
        name: driver
        required: true
        type: string
      - description: 存储目录
        in: formData
        name: directory
        type: string
      - description: 关联任务ID（传solution_id或plan_id时必传）
        in: formData
        name: task_id
        type: integer
      - description: 关联方案ID（当attachment_type为solution时使用）
        in: formData
        name: solution_id
        type: integer
      - description: 关联执行计划ID（当attachment_type为plan时使用）
        in: formData
        name: plan_id
        type: integer
      - description: 附件类型(requirement/solution/plan/general/task)
        in: formData
        name: attachment_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/dto.AttachmentResult'
        "400":
          description: 请求错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 使用指定驱动上传文件
      tags:
      - 文件上传
  /upload/drivers:
    get:
      description: 获取当前可用的存储驱动列表
      produces:
      - application/json
      responses:
        "200":
          description: 驱动列表
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 获取存储驱动列表
      tags:
      - 文件上传
  /upload/media:
    post:
      consumes:
      - multipart/form-data
      description: 上传视频或音频文件并保存附件记录。传solution_id或plan_id时task_id必传
      parameters:
      - description: 媒体文件
        in: formData
        name: file
        required: true
        type: file
      - description: 关联任务ID（传solution_id或plan_id时必传）
        in: formData
        name: task_id
        type: integer
      - description: 关联方案ID（当attachment_type为solution时使用）
        in: formData
        name: solution_id
        type: integer
      - description: 关联执行计划ID（当attachment_type为plan时使用）
        in: formData
        name: plan_id
        type: integer
      - description: 附件类型(requirement/solution/plan/general/task)
        in: formData
        name: attachment_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            $ref: '#/definitions/dto.AttachmentResult'
        "400":
          description: 请求错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 上传媒体文件
      tags:
      - 文件上传
  /upload/task/{task_id}:
    get:
      description: 获取指定任务的所有附件，包含上传人信息
      parameters:
      - description: 任务ID
        in: path
        name: task_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 附件列表
          schema:
            items:
              $ref: '#/definitions/dto.AttachmentDetailResult'
            type: array
        "400":
          description: 请求错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 获取任务附件列表
      tags:
      - 文件上传
  /users:
    get:
      consumes:
      - application/json
      description: 分页获取用户列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.PaginationResponse'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取用户列表
      tags:
      - 用户管理
    post:
      consumes:
      - application/json
      description: 管理员直接创建用户，状态默认为正常
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 创建失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 管理员创建用户
      tags:
      - 用户管理
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: 软删除指定用户
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的用户ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 删除失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 删除用户
      tags:
      - 用户管理
    get:
      consumes:
      - application/json
      description: 根据用户ID获取用户详细信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            $ref: '#/definitions/dto.UserResponse'
        "400":
          description: 无效的用户ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 用户不存在
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 根据ID获取用户
      tags:
      - 用户管理
    put:
      consumes:
      - application/json
      description: 更新指定用户的信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 更新失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 更新用户信息
      tags:
      - 用户管理
  /users/{id}/approve:
    post:
      consumes:
      - application/json
      description: 将待审核用户状态改为正常
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 审核成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的用户ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 审核失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 审核用户
      tags:
      - 用户管理
  /users/{id}/disable:
    post:
      consumes:
      - application/json
      description: 如果用户已禁用则启用，如果用户是正常或待审核状态则禁用
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 状态切换成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 无效的用户ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 操作失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 切换用户状态（禁用/启用）
      tags:
      - 用户管理
  /users/{id}/roles:
    post:
      consumes:
      - application/json
      description: 为指定用户分配角色
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 角色ID列表
        in: body
        name: roles
        required: true
        schema:
          $ref: '#/definitions/dto.AssignRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 分配成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 分配失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 分配角色
      tags:
      - 用户管理
  /users/assignable:
    get:
      consumes:
      - application/json
      description: 获取可指派为任务执行人的用户列表，包括同部门成员和其他部门负责人，支持昵称和邮箱模糊检索
      parameters:
      - description: 关键词（昵称或邮箱，模糊搜索）
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功，包含同部门成员和其他部门负责人
          schema:
            items:
              $ref: '#/definitions/dto.AssignableUserResponse'
            type: array
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 获取可指派的执行人列表
      tags:
      - 用户管理
  /users/batch-import:
    post:
      consumes:
      - application/json
      description: 管理员批量导入组织架构成员，默认密码password123，默认正常状态，默认普通用户角色
      parameters:
      - description: 用户列表
        in: body
        name: users
        required: true
        schema:
          items:
            $ref: '#/definitions/dto.BatchImportUserItem'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: 导入结果
          schema:
            $ref: '#/definitions/dto.BatchImportUserResult'
        "400":
          description: 参数验证失败
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 导入失败
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 批量导入用户
      tags:
      - 用户管理
  /users/password:
    put:
      consumes:
      - application/json
      description: 用户修改自己的密码，需要验证旧密码
      parameters:
      - description: 密码信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 修改成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或旧密码错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 用户修改密码
      tags:
      - 用户管理
  /users/profile:
    put:
      consumes:
      - application/json
      description: 用户修改自己的手机号，只能修改自己的信息
      parameters:
      - description: 修改信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 修改成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 用户修改个人手机号
      tags:
      - 用户管理
  /users/reset-password:
    post:
      consumes:
      - application/json
      description: 超级管理员重置指定用户的密码为初始密码
      parameters:
      - description: 用户ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 重置成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未授权
          schema:
            additionalProperties: true
            type: object
        "403":
          description: 无权限
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 服务器错误
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: 重置用户密码
      tags:
      - 用户管理
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
